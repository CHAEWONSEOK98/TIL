# JavaScript Async Await

**배경**

- 자바스크립트는 싱글 스레드 프로그래밍 언어로 멀티 작업을 위해 비동기 처리 방식을 사용

- 비동기 처리를 위해 사용되는 콜백 함수와 좀더 발전된 형태인 프로미스 객체

- 서비스 규모가 커질 수록 로직이 복잡해지고 코드가 많아져서 가독성과 유지보수의 문제 발생

- 콜백 함수와 프로미스 객체의 한계

<hr />

**async/await**

- async/await는 ES2017에 도입된 문법으로서, Promise 로직을 더 쉽고 간결하게 사용가능

- async/await가 Promise를 대체하기 위한 기능은 아니다

- 내부적으로는 여전히 Promise를 사용해서 비동기를 처리하고, 단지 코드 작성 부분을 프로그래머가 유지보수하기 편하도록 문법만 다르게 사용

- async/await의 장점은 비동기적 접근방식을 동기적으로 작성할 수 있게 해주어 코드가 간결해지며 가독성이 높아진다.

<hr />

**async/await 사용**

- function 키워드 앞에 async 붙이고, 비동기로 처리되는 부분 앞에 await 을 붙여주면 된다.

- 에러 처리 로직은 try/catch 문을 사용한다.

<hr />

**async**

- 리턴값 : async function에서 어떤 값을 리턴해도 프로미스 객체로 감싸져 반환

**await**

- await 키워드는 promise.then() 보다 좀 더 간결하게 비동기 처리의 결과값을 얻을 수 있다.

- await 키워드를 사용하면 then 핸들러를 복잡하게 처리할 필요 없이, 간단하게 비동기 함수 왼쪽에 await 만 명시해주고 결과값을 변수에 받도록 코드를 정의한다.

- then과 콜백 함수를 남발하여 코드가 들여쓰기로 깊어지는 것을 방지하고, 한 줄 레벨에서 코드를 나열하여 가독성을 높일 수 있다.

- 비동기 처리가 완료될 때까지 코드 실행을 일시 중지한다.

- wait 키워드를 쓰면 비동기가 강제적으로 동기 처리가 되어 코드가 순차적으로 수행된다. 이는 장점일 수 있지만 **서로 연관이 없는** 비동기 함수를 동기 처리한다는 단점으로 이어질 수 있다. 이에 대한 해결법으로는 **Promise.all** 메소드가 있다.

> Promise.all() 은 배열 인자의 각 프로미스 비동기 함수들이 resolve가 모두 되야 결과를 리턴 받는다. 배열인자의 각 프로미스 함수들은 제각각 비동기 논블록킹으로 실행되어 시간을 단축 할 수 있다. 리턴값은 각 프로미스 함수의 반환값들이 배열로 담겨져 있다.

<hr />

`비동기 처리 방식은 용도에 따라 발전했다. 상황에 따라 각각의 장단점이 존대하며 정답은 없다.`
